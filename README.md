# üì¶ Subscriptions Service

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

`Subscriptions` ‚Äî —ç—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–µ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏—Ö –ø–æ–¥–ø–∏—Å–∫–∞–º–∏.  
–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ backend-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Spring Boot 3, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Redis, —Å–æ–±—ã—Ç–∏–π–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Kafka –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API —á–µ—Ä–µ–∑ Swagger UI.

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è:
- —Å–æ–∑–¥–∞–Ω–∏—è, –ø–æ–ª—É—á–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π;
- —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;
- –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–ø-3 —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–∞–∫ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞–≤—ã–∫–æ–≤, —Ç–∞–∫ –∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö –∫—Ä—É–ø–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.

---

## ‚öôÔ∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **–Ø–∑—ã–∫**: Java 17
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: Spring Boot 3.2.5
- **–°–£–ë–î**: PostgreSQL 16
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Redis 7.2
- **–ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π**: Apache Kafka 7.6.0 + Zookeeper
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API**: Swagger (springdoc-openapi 2.5.0)
- **–°–±–æ—Ä–∫–∞**: Gradle (Kotlin DSL)
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker + Docker Compose
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: SLF4J + Lombok @Slf4j
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: Jakarta Validation (JSR 380)
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
  - JUnit 5
  - Mockito
  - Testcontainers (–¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤)

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### ‚úÖ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker + Docker Compose
- JDK 17+
- Gradle (–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–µ–∑ Docker)
- IntelliJ IDEA / –ª—é–±–æ–π –¥—Ä—É–≥–æ–π IDE

### üîß –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (—á–µ—Ä–µ–∑ Docker Compose)

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/yourusername/subscriptions.git
   cd subscriptions
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
   ```bash
   docker-compose up --build
   ```

3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
   - `http://localhost:8080` ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –ø–æ—Ä—Ç 8081 –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω)
   - `http://localhost:8080/swagger-ui.html` ‚Äî Swagger UI

> ‚ö†Ô∏è –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–ª—É—à–∞–µ—Ç `8081`, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç –ø—Ä–æ–±—Ä–æ—à–µ–Ω –≤ `docker-compose.yml`.

---

### üß™ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker (—á–µ—Ä–µ–∑ IDE)

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
   - PostgreSQL –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `localhost:5432`
   - Redis –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `localhost:6379`
   - Kafka –∏ Zookeeper —Ä–∞–±–æ—Ç–∞—é—Ç (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ Docker)

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `SubscriptionsApplication.java` –∏–∑ IDE.

---

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ controller/       ‚Üí REST –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îú‚îÄ‚îÄ dto/              ‚Üí DTO-–∫–ª–∞—Å—Å—ã
‚îú‚îÄ‚îÄ entity/           ‚Üí JPA-—Å—É—â–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ exception/        ‚Üí –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ kafka/            ‚Üí Kafka –ø—Ä–æ–¥—é—Å–µ—Ä
‚îú‚îÄ‚îÄ mapper/           ‚Üí –ú–∞–ø–ø–µ—Ä—ã –º–µ–∂–¥—É DTO –∏ Entity
‚îú‚îÄ‚îÄ repository/       ‚Üí JPA-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚îú‚îÄ‚îÄ service/          ‚Üí –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îú‚îÄ‚îÄ service/impl/     ‚Üí –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ configuration/    ‚Üí –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Redis –∏ Redis HealthCheck
‚îî‚îÄ‚îÄ SubscriptionsApplication.java
```

---

## üìå –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `@Cacheable` —Å Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- Kafka-–ø—Ä–æ–¥—é—Å–µ—Ä –¥–ª—è —Å–æ–±—ã—Ç–∏—è `users.created`.
- –ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –æ—Ç–¥–µ–ª—è—é—â–∞—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã –∏ –º–∞–ø–ø–µ—Ä—ã.
- Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å —É–¥–æ–±–Ω—ã–º UI.
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π `@ControllerAdvice` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `@Valid`.
